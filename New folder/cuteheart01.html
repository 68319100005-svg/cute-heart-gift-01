<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíù Cute Heart Gift üíù</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    font-family: 'Prompt', sans-serif;
    background: #190b2d;
    color: white;
  }

  canvas {
    display: block;
  }

  #controls {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    z-index: 5;
  }

  input, button {
    padding: 6px 10px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
  }

  button {
    background-color: #ff7aa0;
    color: white;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: 0.2s;
  }

  button:hover { background-color: #ff8fb8; }
  button:active { transform: scale(0.97); }

  #msg {
    position: absolute;
    bottom: 20px;
    width: 100%;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    text-shadow: 0 0 10px rgba(255,255,255,0.7);
    animation: pulseText 2s infinite;
    z-index: 5;
  }

  @keyframes pulseText {
    0%,100% { transform: scale(1); opacity: 0.5; }
    50% { transform: scale(1.1); opacity: 1; }
  }

  #shareButtons {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    z-index: 5;
  }

  #shareButtons button {
    background-color: #4CAF50;
    padding: 5px 10px;
    font-size: 14px;
  }

  iframe {
    position: absolute;
    top: -9999px;
    width: 0;
    height: 0;
  }
</style>
</head>
<body>

<canvas id="heartCanvas"></canvas>

<div id="controls">
  <input id="nameInput" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô Namtuy üíï" />
  <button id="applyBtn">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠</button>
  <button id="musicBtn">üéµ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á</button>
</div>

<div id="shareButtons">
  <button onclick="shareLine()">‡πÅ‡∏ä‡∏£‡πå Line</button>
  <button onclick="shareFacebook()">‡πÅ‡∏ä‡∏£‡πå Facebook</button>
  <button onclick="copyLink()">Copy Link</button>
</div>

<div id="msg">Namtuy üíï</div>

<!-- ‡πÄ‡∏û‡∏•‡∏á YouTube -->
<iframe id="ytFrame"
  src="https://www.youtube.com/embed/pk4q4-U891E?autoplay=1&mute=0&loop=1&playlist=pk4q4-U891E"
  frameborder="0" allow="autoplay; encrypted-media; clipboard-write; picture-in-picture"
  allowfullscreen></iframe>

<script>
// --- Share Functions ---
function shareLine() {
  const url = encodeURIComponent(location.href);
  window.open(`https://line.me/R/msg/text/?${url}`, "_blank");
}
function shareFacebook() {
  const url = encodeURIComponent(location.href);
  window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, "_blank");
}
function copyLink() {
  navigator.clipboard.writeText(location.href)
    .then(()=> alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!"));
}

// --- Name Change ---
document.getElementById("applyBtn").addEventListener("click", () => {
  const name = document.getElementById("nameInput").value;
  document.getElementById("msg").textContent = name || "üíñ";
});

// --- Music Control ---
const musicBtn = document.getElementById("musicBtn");
const ytFrame = document.getElementById("ytFrame");
let isPlaying = true; // autoplay ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

musicBtn.addEventListener("click", () => {
  if(isPlaying){
    ytFrame.src = "";
    musicBtn.textContent = "üéµ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á";
    isPlaying = false;
  } else {
    ytFrame.src = "https://www.youtube.com/embed/pk4q4-U891E?autoplay=1&mute=0&loop=1&playlist=pk4q4-U891E";
    musicBtn.textContent = "üîá ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á";
    isPlaying = true;
  }
});

// --- Canvas Heart & Character ---
const canvas = document.getElementById("heartCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

let pulse=1, growing=true, bobPhase=0, sparkle=0;
let stars=[];
for(let i=0;i<120;i++){
  stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2+1, phase: Math.random()*Math.PI*2});
}

function drawStars(){
  ctx.fillStyle="#190b2d";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="white";
  for(let s of stars){
    let twinkle = Math.sin(s.phase)*0.5+0.5;
    ctx.globalAlpha = twinkle;
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
    s.phase += 0.05;
  }
  ctx.globalAlpha=1;
}

function drawHeart(x,y,size){
  ctx.beginPath();
  for(let t=0;t<Math.PI*2;t+=0.05){
    let px=16*Math.pow(Math.sin(t),3);
    let py=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);
    ctx.lineTo(x+px*size, y-py*size);
  }
  ctx.closePath();
  let grad = ctx.createLinearGradient(x-100,y-100,x+100,y+100);
  grad.addColorStop(0,"#ff80a0");
  grad.addColorStop(1,"#ffb0c0");
  ctx.fillStyle=grad;
  ctx.fill();
  ctx.strokeStyle="rgba(255,255,255,0.8)";
  ctx.lineWidth=2;
  ctx.stroke();
}

function draw(){
  drawStars();
  let w = canvas.width/2, h = canvas.height/2;
  drawHeart(w,h-50,10*pulse);

  let bob = Math.sin(bobPhase)*5;
  ctx.fillStyle="#fff5f5";
  ctx.beginPath();
  ctx.ellipse(w,h+100+bob,45,45,0,0,Math.PI*2);
  ctx.fill();
  ctx.strokeStyle="#b06482";
  ctx.lineWidth=3;
  ctx.stroke();

  ctx.fillStyle="black";
  ctx.beginPath();
  ctx.ellipse(w-15,h+95+bob,6,10,0,0,Math.PI*2);
  ctx.ellipse(w+15,h+95+bob,6,10,0,0,Math.PI*2);
  ctx.fill();

  ctx.strokeStyle="#702244";
  ctx.beginPath();
  ctx.arc(w,h+110+bob,10,0,Math.PI);
  ctx.stroke();

  drawHeart(w,h+150+bob,2.5);

  sparkle+=0.1;
  for(let i=0;i<8;i++){
    let a=i*Math.PI/4;
    let r=40+Math.sin(sparkle)*5;
    let x1=w+Math.cos(a)*r;
    let y1=h+150+bob+Math.sin(a)*r;
    ctx.beginPath();
    ctx.moveTo(x1,y1);
    ctx.lineTo(x1+Math.cos(a)*10,y1+Math.sin(a)*10);
    ctx.strokeStyle="rgba(255,255,255,0.8)";
    ctx.stroke();
  }

  if(growing)pulse+=0.004; else pulse-=0.004;
  if(pulse>=1.06) growing=false;
  if(pulse<=0.96) growing=true;
  bobPhase+=0.07;

  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
